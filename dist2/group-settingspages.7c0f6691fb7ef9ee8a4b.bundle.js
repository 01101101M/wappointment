(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{VJs4:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(){return function(e,t){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}var i,a=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,r("5oH9").a),function(e,t,r){t&&n(e.prototype,t),r&&n(e,r)}(o,[{key:"endpoints",value:function(){return{save:{method:"post",route:"service"},get:{method:"get",route:"settings"}}}}]),o),s={extends:r("XfSa").a,props:["dataPassed","servicesService","extraOptions","buttons"],data:function(){return{serviceService:null,modelHolder:{name:"",duration:60,type:"",address:"",options:{countries:[],phone_required:!1}},errors:{},formKey:"form",schema:[{type:"row",class:"d-flex flex-wrap flex-sm-nowrap align-items-center",classEach:"mr-2",fields:[{type:"input",label:"Service Name",model:"name",cast:String,styles:{"max-width":"200px"},validation:["required"]},{type:"duration",label:"Duration",model:"duration",cast:String,class:"w-100",default:60,min:5,max:240,step:5,int:!0,unit:"min",validation:["required"]}]},{type:"checkimages",label:"Service Delivery",model:"type",cast:Array,images:[{value:"physical",name:"At a location",icon:"map-marked-alt"},{value:"phone",name:"By Phone",icon:"phone"},{value:"skype",name:"By Skype",icon:["fab","skype"]}],validation:["required"]},{type:"address",label:"Address",model:"address",cast:String,conditions:[{model:"type",values:["physical"]}],validation:["required"]},{type:"checkbox",label:"Require client's phone",model:"options.phone_required",cast:Boolean},{type:"countryselector",label:"Phone field accepted countries",model:"options.countries",cast:Array,conditions:[{type:"or",conda:{model:"type",values:["phone"]},condb:{model:"options.phone_required",values:[!0]}}],validation:["required"]}]}},created:function(){void 0!==this.dataPassed&&(this.modelHolder=Object.assign({},this.dataPassed))},computed:{schemaParsed:function(){return window.wappointmentExtends.filter("serviceFormSchema",this.schema,this.modelHolder)},errorsPassed:function(){return this.errors}},methods:{isReady:function(e){this.$emit("ready",e)},initMethod:function(){this.serviceService=void 0!==this.servicesService?this.servicesService:this.$vueService(new a)},saveExternal:function(){this.$refs.formgenerator.submitTrigger(!0)},save:function(e){this.modelHolder=e,this.request(this.saveServiceRequest,void 0,void 0,!1,this.saved,this.failedValidation)},failedValidation:function(e){void 0!==e.response&&void 0!==e.response.data&&void 0!==e.response.data.data&&void 0!==e.response.data.data.errors&&void 0!==e.response.data.data.errors.validations&&(this.errors=e.response.data.data.errors.validations,this.formKey="form"+(new Date).getTime()),this.serviceError(e)},saveServiceRequest:(i=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(o,i){try{var a=t[o](i),s=a.value}catch(o){return void r(o)}if(!a.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.serviceService.call("save",this.modelHolder);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)}),saved:function(e){this.$emit("saved"),this.serviceSuccess(e)}}},d=r("KHd+"),c=Object(d.a)(s,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("WAPFormGenerator",e._b({key:e.formKey,ref:"formgenerator",attrs:{buttons:e.buttons,schema:e.schemaParsed,data:e.modelHolder,errors:e.errorsPassed,labelButton:"Save"},on:{submit:e.save,back:function(t){e.$emit("back")},ready:e.isReady}},"WAPFormGenerator",e.extraOptions,!1))],1)},[],!1,null,null,null);t.a=c.exports},jwg7:function(e,t,r){"use strict";r.r(t);var n=r("XfSa"),o=r("VJs4"),i={extends:n.a,data:function(){return{viewName:"service",parentLoad:!1,model:{name:"",duration:60,type:"",address:"",options:{countries:[]}}}},components:{ServiceModulable:o.a},methods:{initMethod:function(){this.request(this.initValueRequest,void 0,void 0,!1,this.loaded)},loaded:function(e){this.viewData=e.data,this.model=e.data.service,this.model.duration=parseInt(this.model.duration),-1!==["",null,void 0].indexOf(this.model.options)&&(this.model.options={countries:[]})}}},a=r("KHd+"),s=Object(a.a)(i,function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.dataLoaded?r("div",{staticClass:"container-fluid"},[r("ServiceModulable",{attrs:{dataPassed:e.model,buttons:!0}})],1):e._e()},[],!1,null,null,null);t.default=s.exports}}]);